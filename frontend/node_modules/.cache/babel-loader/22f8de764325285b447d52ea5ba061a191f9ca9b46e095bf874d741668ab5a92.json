{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveGroup } from \"./services\";\nimport { selectAllModules } from \"../../../entities/module/model/selectors\";\nimport { useItemForm } from \"../../../shared/hooks\";\nexport const initGroupForm = {\n  name: '',\n  description: '',\n  img: null,\n  selectedModuleIds: []\n};\nexport const useGroupManager = ({\n  isOpen = false,\n  closeModal,\n  mode,\n  item\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const modules = useSelector(selectAllModules);\n  const isEditMode = mode === 'edit';\n  const {\n    form,\n    handleChange,\n    resetForm\n  } = useItemForm(isEditMode && item ? item : initGroupForm);\n  function onSubmit() {\n    saveGroup(dispatch, form, mode, item);\n    resetForm();\n    closeModal();\n  }\n  function handleToggleModule(id) {\n    if (form.selectedModuleIds.includes(id)) {\n      handleChange('selectedModuleIds', form.selectedModuleIds.filter(itemId => itemId !== id));\n    } else {\n      handleChange('selectedModuleIds', [...form.selectedModuleIds, id]);\n    }\n  }\n  return {\n    modules,\n    isEditMode,\n    onSubmit,\n    handleChange,\n    form,\n    handleToggleModule\n  };\n};\n_s(useGroupManager, \"xac9YHdcXyEOBjRbtpX52tuQ6SE=\", false, function () {\n  return [useDispatch, useSelector, useItemForm];\n});","map":{"version":3,"names":["useDispatch","useSelector","saveGroup","selectAllModules","useItemForm","initGroupForm","name","description","img","selectedModuleIds","useGroupManager","isOpen","closeModal","mode","item","_s","dispatch","modules","isEditMode","form","handleChange","resetForm","onSubmit","handleToggleModule","id","includes","filter","itemId"],"sources":["D:/base/GitHub/MemoryCard/frontend/src/features/groupManager/model/useGroupManager.ts"],"sourcesContent":["import {useDispatch, useSelector} from \"react-redux\";\r\nimport {saveGroup} from \"./services\";\r\nimport {useEffect} from \"react\";\r\nimport {Group} from \"../../../entities/group\";\r\nimport {selectAllModules} from \"../../../entities/module/model/selectors\";\r\nimport {useItemForm} from \"../../../shared/hooks\";\r\nimport {BaseManagerProps} from \"../../../shared/types\";\r\n\r\nexport const initGroupForm = {\r\n    name: '',\r\n    description: '',\r\n    img: null,\r\n    selectedModuleIds: []\r\n}\r\n\r\nexport type GroupForm = Partial<Pick<Group, 'id' | 'name'| 'img' | 'description'>> & {\r\n    selectedModuleIds: number[];\r\n    img?: File | null;\r\n};\r\n\r\nexport const useGroupManager = ({isOpen = false, closeModal, mode, item}: BaseManagerProps<GroupForm>) => {\r\n    const dispatch = useDispatch();\r\n    const modules = useSelector(selectAllModules)\r\n    const isEditMode = mode === 'edit';\r\n\r\n    const {form, handleChange, resetForm} = useItemForm<GroupForm>(\r\n        isEditMode && item ? item : initGroupForm\r\n    );\r\n\r\n    function onSubmit() {\r\n        saveGroup(dispatch, form, mode, item);\r\n        resetForm();\r\n        closeModal();\r\n    }\r\n\r\n    function handleToggleModule(id: number) {\r\n        if (form.selectedModuleIds.includes(id)) {\r\n            handleChange('selectedModuleIds', form.selectedModuleIds.filter(itemId => itemId !== id));\r\n        } else {\r\n            handleChange('selectedModuleIds', [...form.selectedModuleIds, id])\r\n        }\r\n    }\r\n\r\n    return {\r\n        modules,\r\n        isEditMode,\r\n        onSubmit,\r\n        handleChange,\r\n        form,\r\n        handleToggleModule,\r\n    }\r\n};"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAAQC,SAAS,QAAO,YAAY;AAGpC,SAAQC,gBAAgB,QAAO,0CAA0C;AACzE,SAAQC,WAAW,QAAO,uBAAuB;AAGjD,OAAO,MAAMC,aAAa,GAAG;EACzBC,IAAI,EAAE,EAAE;EACRC,WAAW,EAAE,EAAE;EACfC,GAAG,EAAE,IAAI;EACTC,iBAAiB,EAAE;AACvB,CAAC;AAOD,OAAO,MAAMC,eAAe,GAAGA,CAAC;EAACC,MAAM,GAAG,KAAK;EAAEC,UAAU;EAAEC,IAAI;EAAEC;AAAiC,CAAC,KAAK;EAAAC,EAAA;EACtG,MAAMC,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAC9B,MAAMiB,OAAO,GAAGhB,WAAW,CAACE,gBAAgB,CAAC;EAC7C,MAAMe,UAAU,GAAGL,IAAI,KAAK,MAAM;EAElC,MAAM;IAACM,IAAI;IAAEC,YAAY;IAAEC;EAAS,CAAC,GAAGjB,WAAW,CAC/Cc,UAAU,IAAIJ,IAAI,GAAGA,IAAI,GAAGT,aAChC,CAAC;EAED,SAASiB,QAAQA,CAAA,EAAG;IAChBpB,SAAS,CAACc,QAAQ,EAAEG,IAAI,EAAEN,IAAI,EAAEC,IAAI,CAAC;IACrCO,SAAS,CAAC,CAAC;IACXT,UAAU,CAAC,CAAC;EAChB;EAEA,SAASW,kBAAkBA,CAACC,EAAU,EAAE;IACpC,IAAIL,IAAI,CAACV,iBAAiB,CAACgB,QAAQ,CAACD,EAAE,CAAC,EAAE;MACrCJ,YAAY,CAAC,mBAAmB,EAAED,IAAI,CAACV,iBAAiB,CAACiB,MAAM,CAACC,MAAM,IAAIA,MAAM,KAAKH,EAAE,CAAC,CAAC;IAC7F,CAAC,MAAM;MACHJ,YAAY,CAAC,mBAAmB,EAAE,CAAC,GAAGD,IAAI,CAACV,iBAAiB,EAAEe,EAAE,CAAC,CAAC;IACtE;EACJ;EAEA,OAAO;IACHP,OAAO;IACPC,UAAU;IACVI,QAAQ;IACRF,YAAY;IACZD,IAAI;IACJI;EACJ,CAAC;AACL,CAAC;AAACR,EAAA,CA/BWL,eAAe;EAAA,QACPV,WAAW,EACZC,WAAW,EAGaG,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}