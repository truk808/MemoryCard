{"ast":null,"code":"import { addTag, changeTag } from \"../../../entities/tag\";\nimport { createTag, updateTag, deleteTag } from \"../../../shared/api\";\nimport { removeModule } from \"../../../entities/module\";\nexport const saveTag = (dispatch, form, mode, item) => {\n  const isEditMode = mode === \"edit\";\n  const tag = {\n    id: isEditMode && item !== null && item !== void 0 && item.id ? item.id : Date.now(),\n    name: `#${form.name}`\n  };\n  if (isEditMode) {\n    updateTag(tag.id, tag).then(data => {\n      dispatch(changeTag(data));\n    });\n  } else {\n    createTag(tag.name).then(data => {\n      dispatch(addTag(data));\n    });\n  }\n};\nexport const removeTag = (dispatch, tagId) => {\n  const confirmed = window.confirm(\"Удалить тэг?\");\n  if (!confirmed) return;\n  deleteTag(tagId).then(() => {\n    dispatch(removeModule(tagId));\n  });\n};","map":{"version":3,"names":["addTag","changeTag","createTag","updateTag","deleteTag","removeModule","saveTag","dispatch","form","mode","item","isEditMode","tag","id","Date","now","name","then","data","removeTag","tagId","confirmed","window","confirm"],"sources":["D:/base/GitHub/MemoryCard/frontend/src/features/tagManager/model/services.ts"],"sourcesContent":["import {addTag, changeTag} from \"../../../entities/tag\";\r\nimport {Dispatch} from \"react\";\r\nimport {UnknownAction} from \"@reduxjs/toolkit\";\r\nimport {createTag, updateTag, deleteTag} from \"../../../shared/api\";\r\nimport {TagForm} from \"./useTagManager\";\r\nimport {removeModule} from \"../../../entities/module\";\r\nimport {ManagerMode} from \"../../../shared/types\";\r\n\r\nexport const saveTag =  (dispatch:  Dispatch<UnknownAction>, form: TagForm, mode: ManagerMode, item?: TagForm) => {\r\n    const isEditMode = mode === \"edit\";\r\n\r\n    const tag = {\r\n        id: isEditMode && item?.id ? item.id : Date.now(),\r\n        name: `#${form.name}`,\r\n    };\r\n\r\n    if (isEditMode) {\r\n        updateTag(tag.id, tag).then((data) => {\r\n            dispatch(changeTag(data));\r\n        })\r\n    } else {\r\n        createTag(tag.name).then((data) => {\r\n            dispatch(addTag(data));\r\n        })\r\n    }\r\n};\r\n\r\nexport const removeTag =  (dispatch:  Dispatch<UnknownAction>, tagId: number) => {\r\n    const confirmed = window.confirm(\"Удалить тэг?\");\r\n    if (!confirmed) return;\r\n\r\n    deleteTag(tagId).then(() => {\r\n        dispatch(removeModule(tagId));\r\n    })\r\n}"],"mappings":"AAAA,SAAQA,MAAM,EAAEC,SAAS,QAAO,uBAAuB;AAGvD,SAAQC,SAAS,EAAEC,SAAS,EAAEC,SAAS,QAAO,qBAAqB;AAEnE,SAAQC,YAAY,QAAO,0BAA0B;AAGrD,OAAO,MAAMC,OAAO,GAAIA,CAACC,QAAkC,EAAEC,IAAa,EAAEC,IAAiB,EAAEC,IAAc,KAAK;EAC9G,MAAMC,UAAU,GAAGF,IAAI,KAAK,MAAM;EAElC,MAAMG,GAAG,GAAG;IACRC,EAAE,EAAEF,UAAU,IAAID,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEG,EAAE,GAAGH,IAAI,CAACG,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IACjDC,IAAI,EAAE,IAAIR,IAAI,CAACQ,IAAI;EACvB,CAAC;EAED,IAAIL,UAAU,EAAE;IACZR,SAAS,CAACS,GAAG,CAACC,EAAE,EAAED,GAAG,CAAC,CAACK,IAAI,CAAEC,IAAI,IAAK;MAClCX,QAAQ,CAACN,SAAS,CAACiB,IAAI,CAAC,CAAC;IAC7B,CAAC,CAAC;EACN,CAAC,MAAM;IACHhB,SAAS,CAACU,GAAG,CAACI,IAAI,CAAC,CAACC,IAAI,CAAEC,IAAI,IAAK;MAC/BX,QAAQ,CAACP,MAAM,CAACkB,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC;EACN;AACJ,CAAC;AAED,OAAO,MAAMC,SAAS,GAAIA,CAACZ,QAAkC,EAAEa,KAAa,KAAK;EAC7E,MAAMC,SAAS,GAAGC,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC;EAChD,IAAI,CAACF,SAAS,EAAE;EAEhBjB,SAAS,CAACgB,KAAK,CAAC,CAACH,IAAI,CAAC,MAAM;IACxBV,QAAQ,CAACF,YAAY,CAACe,KAAK,CAAC,CAAC;EACjC,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}