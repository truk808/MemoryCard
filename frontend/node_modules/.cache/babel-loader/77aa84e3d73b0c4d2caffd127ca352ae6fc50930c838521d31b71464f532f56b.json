{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveModule } from \"./services\";\nimport { selectAllCards } from \"../../../entities/card\";\nimport { useItemForm } from \"../../../shared/hooks\";\nexport const initModuleForm = {\n  name: \"\",\n  icon: '',\n  selectedCardIds: []\n};\nexport const useModuleManager = ({\n  isOpen = false,\n  closeModal,\n  mode,\n  item\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const cards = useSelector(selectAllCards);\n  const isEditMode = mode === \"edit\";\n  const {\n    form,\n    handleChange,\n    resetForm\n  } = useItemForm(isEditMode && item ? item : initModuleForm);\n  function onSubmit() {\n    // console.log('', form.selectedCardIds)\n    saveModule(dispatch, form, mode, item);\n    resetForm();\n    closeModal();\n  }\n  function handleToggleCard(id) {\n    if (form.selectedCardIds.includes(id)) {\n      handleChange('selectedCardIds', form.selectedCardIds.filter(itemId => itemId !== id));\n    } else {\n      handleChange('selectedCardIds', [...form.selectedCardIds, id]);\n    }\n  }\n  return {\n    cards,\n    isEditMode,\n    onSubmit,\n    handleChange,\n    form,\n    handleToggleCard\n  };\n};\n_s(useModuleManager, \"dP2Jv7d0SECOdn36hKhf0NrVZO0=\", false, function () {\n  return [useDispatch, useSelector, useItemForm];\n});","map":{"version":3,"names":["useDispatch","useSelector","saveModule","selectAllCards","useItemForm","initModuleForm","name","icon","selectedCardIds","useModuleManager","isOpen","closeModal","mode","item","_s","dispatch","cards","isEditMode","form","handleChange","resetForm","onSubmit","handleToggleCard","id","includes","filter","itemId"],"sources":["D:/base/GitHub/MemoryCard/frontend/src/features/moduleManager/model/useModuleManager.ts"],"sourcesContent":["import {useDispatch, useSelector} from \"react-redux\";\r\nimport {saveModule} from \"./services\";\r\nimport {Module} from \"../../../entities/module\";\r\nimport {selectAllCards} from \"../../../entities/card\";\r\nimport {useItemForm} from \"../../../shared/hooks\";\r\nimport {BaseManagerProps} from \"../../../shared/types\";\r\n\r\nexport const initModuleForm: ModuleForm = {\r\n    name: \"\",\r\n    icon: '',\r\n    selectedCardIds: [],\r\n};\r\n\r\nexport type ModuleForm = Partial<Pick<Module, \"id\" | 'icon' | \"name\">> & {\r\n    selectedCardIds: number[];\r\n};\r\n\r\nexport const useModuleManager = ({isOpen = false, closeModal, mode, item}: BaseManagerProps<ModuleForm>) => {\r\n    const dispatch = useDispatch();\r\n    const cards = useSelector(selectAllCards);\r\n    const isEditMode = mode === \"edit\";\r\n\r\n    const { form, handleChange, resetForm } = useItemForm<ModuleForm>(\r\n        isEditMode && item ? item : initModuleForm\r\n    );\r\n\r\n    function onSubmit() {\r\n        // console.log('', form.selectedCardIds)\r\n        saveModule(dispatch, form, mode, item);\r\n        resetForm();\r\n        closeModal();\r\n    }\r\n\r\n    function handleToggleCard (id: number){\r\n        if (form.selectedCardIds.includes(id)) {\r\n            handleChange('selectedCardIds', form.selectedCardIds.filter(itemId => itemId !== id));\r\n        } else {\r\n            handleChange('selectedCardIds', [...form.selectedCardIds, id])\r\n        }\r\n    }\r\n\r\n    return {\r\n        cards,\r\n        isEditMode,\r\n        onSubmit,\r\n        handleChange,\r\n        form,\r\n        handleToggleCard,\r\n    }\r\n};"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAAQC,UAAU,QAAO,YAAY;AAErC,SAAQC,cAAc,QAAO,wBAAwB;AACrD,SAAQC,WAAW,QAAO,uBAAuB;AAGjD,OAAO,MAAMC,cAA0B,GAAG;EACtCC,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE,EAAE;EACRC,eAAe,EAAE;AACrB,CAAC;AAMD,OAAO,MAAMC,gBAAgB,GAAGA,CAAC;EAACC,MAAM,GAAG,KAAK;EAAEC,UAAU;EAAEC,IAAI;EAAEC;AAAkC,CAAC,KAAK;EAAAC,EAAA;EACxG,MAAMC,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,KAAK,GAAGf,WAAW,CAACE,cAAc,CAAC;EACzC,MAAMc,UAAU,GAAGL,IAAI,KAAK,MAAM;EAElC,MAAM;IAAEM,IAAI;IAAEC,YAAY;IAAEC;EAAU,CAAC,GAAGhB,WAAW,CACjDa,UAAU,IAAIJ,IAAI,GAAGA,IAAI,GAAGR,cAChC,CAAC;EAED,SAASgB,QAAQA,CAAA,EAAG;IAChB;IACAnB,UAAU,CAACa,QAAQ,EAAEG,IAAI,EAAEN,IAAI,EAAEC,IAAI,CAAC;IACtCO,SAAS,CAAC,CAAC;IACXT,UAAU,CAAC,CAAC;EAChB;EAEA,SAASW,gBAAgBA,CAAEC,EAAU,EAAC;IAClC,IAAIL,IAAI,CAACV,eAAe,CAACgB,QAAQ,CAACD,EAAE,CAAC,EAAE;MACnCJ,YAAY,CAAC,iBAAiB,EAAED,IAAI,CAACV,eAAe,CAACiB,MAAM,CAACC,MAAM,IAAIA,MAAM,KAAKH,EAAE,CAAC,CAAC;IACzF,CAAC,MAAM;MACHJ,YAAY,CAAC,iBAAiB,EAAE,CAAC,GAAGD,IAAI,CAACV,eAAe,EAAEe,EAAE,CAAC,CAAC;IAClE;EACJ;EAEA,OAAO;IACHP,KAAK;IACLC,UAAU;IACVI,QAAQ;IACRF,YAAY;IACZD,IAAI;IACJI;EACJ,CAAC;AACL,CAAC;AAACR,EAAA,CAhCWL,gBAAgB;EAAA,QACRT,WAAW,EACdC,WAAW,EAGiBG,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}