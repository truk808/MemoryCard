{"ast":null,"code":"var _jsxFileName = \"D:\\\\base\\\\GitHub\\\\MemoryCard\\\\frontend\\\\src\\\\app\\\\entrypoint\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport '../styles/index.scss';\nimport { Header } from \"../../widgets/header\";\nimport { setAuth, setUser } from \"../../entities/user\";\nimport { setGroups } from \"../../entities/group\";\nimport { setGroupModules } from \"../../entities/groupModule\";\nimport { setModules } from \"../../entities/module\";\nimport { setModuleCards } from \"../../entities/moduleCard\";\nimport { setCards } from \"../../entities/card\";\nimport { setCardTags } from \"../../entities/cardTag\";\nimport { setTags } from \"../../entities/tag\";\nimport { bootstrapUserData, check } from \"../../shared/api\";\nimport AppRouter from \"../routes/AppRouter\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.user);\n  const {\n    isAuth\n  } = useSelector(state => state.user);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    check().then(data => {\n      dispatch(setAuth(true));\n      dispatch(setUser(data));\n    }).catch(() => {\n      console.log(\"Ошибка user\");\n      dispatch(setAuth(false));\n      dispatch(setUser({}));\n    }).finally(() => setLoading(false));\n  }, []);\n  useEffect(() => {\n    if (!isAuth) return;\n    bootstrapUserData().then(data => {\n      dispatch(setGroups(data.groups));\n      dispatch(setModules(data.modules));\n      dispatch(setCards(data.cards));\n      dispatch(setTags(data.tags));\n      dispatch(setGroupModules(data.groupModules));\n      dispatch(setModuleCards(data.moduleCards));\n      dispatch(setCardTags(data.cardTags));\n      console.log('bootstrap', data);\n    });\n  }, [isAuth]);\n  useEffect(() => {\n    console.log('user', user);\n  }, [user]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(AppRouter, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(App, \"ugpvfQgQrO3AMeGLeAWKwXOhv40=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Header","setAuth","setUser","setGroups","setGroupModules","setModules","setModuleCards","setCards","setCardTags","setTags","bootstrapUserData","check","AppRouter","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","dispatch","user","state","isAuth","loading","setLoading","then","data","catch","console","log","finally","groups","modules","cards","tags","groupModules","moduleCards","cardTags","children","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["D:/base/GitHub/MemoryCard/frontend/src/app/entrypoint/App.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {AppDispatch, RootState} from \"../store\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport '../styles/index.scss'\r\nimport {Header} from \"../../widgets/header\";\r\nimport {setAuth, setUser} from \"../../entities/user\";\r\nimport {setGroups} from \"../../entities/group\";\r\nimport {setGroupModules} from \"../../entities/groupModule\";\r\nimport {setModules} from \"../../entities/module\";\r\nimport {setModuleCards} from \"../../entities/moduleCard\";\r\nimport {setCards} from \"../../entities/card\";\r\nimport {setCardTags} from \"../../entities/cardTag\";\r\nimport {setTags} from \"../../entities/tag\";\r\nimport {bootstrapUserData, check} from \"../../shared/api\";\r\nimport AppRouter from \"../routes/AppRouter\";\r\n\r\nconst App = () => {\r\n    const dispatch = useDispatch<AppDispatch>()\r\n    const user = useSelector((state: RootState) => state.user)\r\n    const {isAuth} = useSelector((state: RootState) => state.user);\r\n    const [loading, setLoading] = useState<boolean>(true)\r\n\r\n    useEffect(() => {\r\n        check()\r\n            .then(data => {\r\n                dispatch(setAuth(true));\r\n                dispatch(setUser(data));\r\n            })\r\n            .catch(() => {\r\n                console.log(\"Ошибка user\");\r\n                dispatch(setAuth(false));\r\n                dispatch(setUser({}));\r\n            })\r\n            .finally(() => setLoading(false));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!isAuth) return;\r\n        bootstrapUserData().then(data => {\r\n            dispatch(setGroups(data.groups));\r\n            dispatch(setModules(data.modules));\r\n            dispatch(setCards(data.cards));\r\n            dispatch(setTags(data.tags));\r\n\r\n            dispatch(setGroupModules(data.groupModules));\r\n            dispatch(setModuleCards(data.moduleCards));\r\n            dispatch(setCardTags(data.cardTags));\r\n            console.log('bootstrap', data)\r\n        });\r\n    }, [isAuth]);\r\n\r\n    useEffect(() => {\r\n        console.log('user', user)\r\n    }, [user]);\r\n\r\n    if (loading) {\r\n        return <div>загрузка</div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header/>\r\n            <div className=\"container\">\r\n                <AppRouter/>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAEhD,SAAQC,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,OAAO,sBAAsB;AAC7B,SAAQC,MAAM,QAAO,sBAAsB;AAC3C,SAAQC,OAAO,EAAEC,OAAO,QAAO,qBAAqB;AACpD,SAAQC,SAAS,QAAO,sBAAsB;AAC9C,SAAQC,eAAe,QAAO,4BAA4B;AAC1D,SAAQC,UAAU,QAAO,uBAAuB;AAChD,SAAQC,cAAc,QAAO,2BAA2B;AACxD,SAAQC,QAAQ,QAAO,qBAAqB;AAC5C,SAAQC,WAAW,QAAO,wBAAwB;AAClD,SAAQC,OAAO,QAAO,oBAAoB;AAC1C,SAAQC,iBAAiB,EAAEC,KAAK,QAAO,kBAAkB;AACzD,OAAOC,SAAS,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5C,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACd,MAAMC,QAAQ,GAAGrB,WAAW,CAAc,CAAC;EAC3C,MAAMsB,IAAI,GAAGrB,WAAW,CAAEsB,KAAgB,IAAKA,KAAK,CAACD,IAAI,CAAC;EAC1D,MAAM;IAACE;EAAM,CAAC,GAAGvB,WAAW,CAAEsB,KAAgB,IAAKA,KAAK,CAACD,IAAI,CAAC;EAC9D,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAU,IAAI,CAAC;EAErDD,SAAS,CAAC,MAAM;IACZe,KAAK,CAAC,CAAC,CACFc,IAAI,CAACC,IAAI,IAAI;MACVP,QAAQ,CAAClB,OAAO,CAAC,IAAI,CAAC,CAAC;MACvBkB,QAAQ,CAACjB,OAAO,CAACwB,IAAI,CAAC,CAAC;IAC3B,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACTC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1BV,QAAQ,CAAClB,OAAO,CAAC,KAAK,CAAC,CAAC;MACxBkB,QAAQ,CAACjB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CACD4B,OAAO,CAAC,MAAMN,UAAU,CAAC,KAAK,CAAC,CAAC;EACzC,CAAC,EAAE,EAAE,CAAC;EAEN5B,SAAS,CAAC,MAAM;IACZ,IAAI,CAAC0B,MAAM,EAAE;IACbZ,iBAAiB,CAAC,CAAC,CAACe,IAAI,CAACC,IAAI,IAAI;MAC7BP,QAAQ,CAAChB,SAAS,CAACuB,IAAI,CAACK,MAAM,CAAC,CAAC;MAChCZ,QAAQ,CAACd,UAAU,CAACqB,IAAI,CAACM,OAAO,CAAC,CAAC;MAClCb,QAAQ,CAACZ,QAAQ,CAACmB,IAAI,CAACO,KAAK,CAAC,CAAC;MAC9Bd,QAAQ,CAACV,OAAO,CAACiB,IAAI,CAACQ,IAAI,CAAC,CAAC;MAE5Bf,QAAQ,CAACf,eAAe,CAACsB,IAAI,CAACS,YAAY,CAAC,CAAC;MAC5ChB,QAAQ,CAACb,cAAc,CAACoB,IAAI,CAACU,WAAW,CAAC,CAAC;MAC1CjB,QAAQ,CAACX,WAAW,CAACkB,IAAI,CAACW,QAAQ,CAAC,CAAC;MACpCT,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEH,IAAI,CAAC;IAClC,CAAC,CAAC;EACN,CAAC,EAAE,CAACJ,MAAM,CAAC,CAAC;EAEZ1B,SAAS,CAAC,MAAM;IACZgC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAET,IAAI,CAAC;EAC7B,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,IAAIG,OAAO,EAAE;IACT,oBAAOT,OAAA;MAAAwB,QAAA,EAAK;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9B;EAEA,oBACI5B,OAAA,CAAAE,SAAA;IAAAsB,QAAA,gBACIxB,OAAA,CAACd,MAAM;MAAAuC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eACT5B,OAAA;MAAK6B,SAAS,EAAC,WAAW;MAAAL,QAAA,eACtBxB,OAAA,CAACF,SAAS;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC;EAAA,eACR,CAAC;AAEX,CAAC;AAACxB,EAAA,CAnDID,GAAG;EAAA,QACYnB,WAAW,EACfC,WAAW,EACPA,WAAW;AAAA;AAAA6C,EAAA,GAH1B3B,GAAG;AAqDT,eAAeA,GAAG;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}